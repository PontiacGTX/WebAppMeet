@inherits CustomLayoutComponentBase
@inject IHttpContextAccessor _httpCtx
@code{


    protected override async Task OnInitializedAsync()
    {

    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if(firstRender)
        {
            var it =this._httpCtx.HttpContext.Response;
            AuthenticationState authenticationState;
            var token =await  _localDataStorage.GetTokenAsync();
            WebAppMeet.Data.Models.TokenResponse tokenObj = null;

            if(!string.IsNullOrEmpty(token))
            tokenObj =Newtonsoft.Json.JsonConvert.DeserializeObject<WebAppMeet.Data.Models.TokenResponse>(token);

            authenticationState = await _AuthenticationStateProv.GetAuthenticationStateAsync("jwt",tokenObj?.Token);
            string user = authenticationState?.User?.Identity?.Name;
             User = ( _userManager.Users.FirstOrDefault(x => x.Email == user));
        }
    }
}
<PageTitle>WebAppMeet</PageTitle>
<div >
    
    <CascadingValue Value="User">
         <NavMenu />
   </CascadingValue>
</div>
<div class="page">
    

    <main>
        <CascadingValue Value="User">
            <article class="content px-4">
                @Body
            </article>
        </CascadingValue>
    </main>
</div>
